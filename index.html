<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>برنامه‌ریز پیشرفته انتخاب واحد</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="src/style.css">
</head>
<body>

    <header class="main-header">
        <h1>برنامه‌ریز پیشرفته انتخاب واحد</h1>
        <p class="developer-credit">توسعه یافته توسط <a href="https://github.com/MahdiHoseinpoor" target="_blank" rel="noopener noreferrer">مهدی حسین پور</a></p>
    </header>

    <div class="container">
        
        <details class="instructions-container" open>
            <summary>راهنمای سریع (برای نمایش/پنهان کردن کلیک کنید)</summary>
            <div class="instructions-content">
                <h4>مرحله اول: دریافت داده‌های دروس از سامانه بهستان</h4>
                <ol>
                    <li>وارد سامانه دانشگاه شوید: <strong><a href="https://ems.sbu.ac.ir/" target="_blank" rel="noopener noreferrer">ems.sbu.ac.ir</a></strong></li>
                    <li>به بخش گزارش‌ها بروید و <strong>گزارش ۲۱۲ (لیست دروس ارائه شده)</strong> را باز کنید.</li>
                    <li>با زدن کلید `F12` (یا `Ctrl+Shift+I`) ابزار توسعه‌دهندگان مرورگر (Developer Tools) را باز کنید.</li>
                    <li>به تب <strong>Network</strong> بروید.</li>
                    <li>در گزارش ۲۱۲، پارامترهای مورد نظر خود (مثلاً دانشکده) را انتخاب و دکمه "مشاهده گزارش" را بزنید.</li>
                    <li>در تب Network، به دنبال یک درخواست با نام <code>BAS0237_CMP_ViewReport.svc</code> بگردید.</li>
                    <li>روی <code>BAS0237_CMP_ViewReport.svc</code> کلیک کرده و در پنل باز شده، به تب <strong>Response</strong> بروید.</li>
                    <li><strong>تمام محتوای متنی</strong> داخل این تب را کپی کنید (از `{` اول تا `}` آخر).</li>
                </ol>
                <h4>مرحله دوم: بارگذاری داده‌ها در این برنامه</h4>
                <p>داده‌های کپی شده را از طریق یکی از دو روش زیر وارد کنید:</p>
            </div>
        </details>

        <div class="section" id="data-loader">
            <h2>۱. بارگذاری داده‌ها</h2>
            <div class="input-tabs">
                <button class="tab-btn active" data-tab="file-tab">بارگذاری از فایل</button>
                <button class="tab-btn" data-tab="paste-tab">چسباندن متن</button>
            </div>
            <div id="file-tab" class="tab-content active">
                <label for="file-input" class="file-label">انتخاب فایل پاسخ سرور (.txt/.json)</label>
                <input type="file" id="file-input" accept=".txt, .json">
                <span id="file-name">فایلی انتخاب نشده است</span>
            </div>
            <div id="paste-tab" class="tab-content">
                <textarea id="paste-area" placeholder="محتوای فایل پاسخ سرور را اینجا بچسبانید..."></textarea>
                <button id="paste-btn" class="paste-button">پردازش متن</button>
            </div>
        </div>

        <div class="main-layout">
            <aside class="sidebar">
                <div class="section">
                    <h2>۲. تنظیمات کاربر</h2>
                    <div id="gender-selector" class="gender-selector">
                        <label>جنسیت شما:</label>
                        <div>
                            <input type="radio" id="gender-male" name="gender" value="male">
                            <label for="gender-male">مرد</label>
                        </div>
                        <div>
                            <input type="radio" id="gender-female" name="gender" value="female">
                            <label for="gender-female">زن</label>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>۳. برنامه‌های من</h2>
                    <div class="input-group">
                        <select id="schedule-selector"></select>
                    </div>
                    <div class="input-group schedule-controls">
                        <button id="new-schedule-btn">برنامه جدید</button>
                        <button id="rename-schedule-btn">تغییر نام</button>
                        <button id="delete-schedule-btn">حذف</button>
                    </div>
                </div>

                <div class="section">
                    <h2>برنامه فعال <span id="total-units"></span></h2>
                    <button id="view-calendar-btn" class="view-calendar-button">نمایش تقویم هفتگی</button>
                    <ul id="selected-classes-list"><p class="placeholder">یک برنامه را انتخاب کنید.</p></ul>
                </div>

                 <div class="section">
                    <h2>ابزارها</h2>
                    <div class="input-group">
                        <input type="text" id="manual-add-input" placeholder="کد درس را وارد کنید...">
                        <button id="manual-add-btn">افزودن</button>
                    </div>
                    <div class="input-group">
                        <input type="text" id="search-input" placeholder="جستجوی کلاس‌های موجود...">
                    </div>
                </div>
            </aside>
            <main class="main-content">
                <div class="section">
                    <h2>۴. تمام کلاس‌های ارائه شده</h2>
                    <div class="table-container">
                        <table id="classes-table">
                            <thead><tr><th>انتخاب</th><th>کد درس</th><th>نام درس</th><th>استاد</th><th>زمان کلاس</th><th>زمان امتحان</th></tr></thead>
                            <tbody id="classes-tbody"><tr><td colspan="6" class="placeholder">برای شروع، یک فایل داده بارگذاری کنید.</td></tr></tbody>
                        </table>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modals -->
    <div id="conflict-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h3>تداخل در برنامه</h3>
            <div id="conflict-details"></div>
        </div>
    </div>
    
    <div id="visual-schedule-modal" class="modal-overlay">
        <div class="modal-content wide">
            <button class="modal-close-btn">&times;</button>
            <h3>نمای تقویم هفتگی</h3>
            <div id="visual-schedule-container" class="visual-schedule-container"></div>
        </div>
    </div>

    <footer class="main-footer">
        <p>مشاهده سورس کد پروژه در <a href="https://github.com/MahdiHoseinpoor/Advanced-Class-Scheduler" target="_blank" rel="noopener noreferrer">گیت‌هاب</a></p>
    </footer>

     <script type="module" src="src/js/main.js" defer></script>
</body>
</html>
